""" This is a game that tests skills with Arithmetic. The user is given a number to add, multiply , subtract or divide
and given 10 seconds to answer.
"""
""" At this moment, I am violating the strict logic layer thing. Because I need to be able to test as I go.
I am going to provide generateExpression, evaluateExpression, Timeout and checkAnswer as public methods to the UI layer
"""

from random import randint
import time as t

def generateExpression(level):
    a = randint(10**(level-1),10**level)
    b = randint(10**(level-1),10**level)
    return "%d x %d"%(a,b),a,b
def evaluateExpression():
    pass
def generateQuestion(level):
    """First draft. I think a better way to do this would make this easier to generalise would be to generate an
    expression string as the question and evaluate it and return the expression string and the answer. Make use of a
    generateExpression function and an evaluateExpression function"""

    expr,a,b = generateExpression(level)
    result = a*b #This would be replaces with generateQuestion
    return expr,str(result)

def checkAnswer(CorrectAnswer,UserAnswer):
    pass

def run(level,times):
    """Run the game a given number of times, at a certain level. The level indicates the number of digits of the numbers"""
    i = 0
    while i<times:
        expr,result= generateQuestion(level)
        print "What is the %s"%expr
        start = t.time()
        #I want to use a better way of doing the timeout. I want it to stop requesting for input once it has timed out
        ans = raw_input('Answer Now!')
        elapsedTime = t.time()-start
        if elapsedTime>10:
            TimeOut = True
        else:
            TimeOut = False
        if TimeOut:
            print "Time has run out. The answer is %s"%result
        elif ans==result and not TimeOut:
            print "That's correct! It took you %f"%elapsedTime
        if  ans!= result:
            print "That's wrong. The answer is %s"%result
        i+=1
run(1,5)
